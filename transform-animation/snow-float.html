<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>snow float</title>
  <style>
    @font-face {
      font-family: icon;
      src: url("images/icon.ttf"), url("images/icon.eot");
    }

    body {
      background: black;
    }

    div {
      font-family: icon;
      color: #ffffff;
      position: absolute;
      top: -100px;
    }
  </style>
  <script src="zQuery.js"></script>
  <script>
    window.onload = function () {
      var bd = document.getElementsByTagName("body")[0];

      function snow() {
        var win_height = win("height");
        var win_width = win("width");

        function createSnow() {
          var snow_div = document.createElement("div");
          snow_div.innerHTML = "j";   //写入雪花（字体的代码为j）
          var size = 20 + parseInt(Math.random() * 30);
          var left = parseInt(win_width * (Math.random()) * 0.98);
          snow_div.style.fontSize = size + "px";
          snow_div.style.width = size + "px";
          snow_div.style.height = size + "px";
          snow_div.style.left = left + "px";
          bd.appendChild(snow_div);
          return snow_div;
        }

        setInterval(function () {
          var snow = createSnow();
          var sbd = Math.ceil(Math.random() * 3);
          move(snow, sbd);
        }, 100);
        function move(obj, speed) {
          var top = 0;
          var timer = setInterval(
              function () {
                top += speed;
                obj.style.top = top + "px";
                if (top > win_height - 30) {
                  clearInterval(timer);
                }
              }, 30);
        }

        setInterval(function () {
          var snows = document.getElementsByTagName("div");
          for (var i = 0; i < snows.length / 5; i++) {
            snows[i].parentNode.removeChild(snows[i]);
          }
        }, 10000);
      }

      snow();
      window.onresize = function () {
        var snows = document.getElementsByTagName("div");
        for (var i = 0; i < snows.length; i++) {
          snows[i].parentNode.removeChild(snows[i]);
        }
      }
    }
  </script>
</head>
<body>

</body>
</html>